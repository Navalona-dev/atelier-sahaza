{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}

{% set about = "" %}
{% set siege = "" %}

{% for homePage in homePages %}
    {% if homePage.label == "about" %}
        {% set about = homePage %}
    {% endif %}
    {% if homePage.label == "siege" %}
        {% set siege = homePage %}
    {% endif %}
{% endfor %}

<section class="home" id="home">
    <div class="container-fluid d-flex align-items-center mb-5 py-5" style="min-height: 100vh;">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-xl-5 col-lg-5 col-md-12 col-sm-12 px-5 pl-lg-0 pb-5 pb-lg-0 content-img ">
                    <div class="home-img">
                        <img class="img-fluid shadow-sm" src="{{ asset('assets/images/profile.jpg') }}" alt="">
                    </div>
                </div>
                <div class="col-lg-7 col-lg-7 col-md-12 col-sm-12">
                    <h3 class="text-white font-weight-normal mb-3 text-us">Nous sommes</h3>
                    <h1 class="display-3 text-uppercase text-light mb-5 text-stroke">Atelier SAHAZA</h1>
                    <h1 class="typed-text-output d-inline font-weight-lighter text-white"></h1>
                    <div class="typed-text d-none">Constructions Métalliques, Structures Métaliques, Forge Métallique</div>
                    <div class="d-flex align-items-center justify-content-center justify-content-lg-start pt-5 mt-3 home-video">
                        <a href="{% if app.request.attributes.get('_route') != 'app_home' %} {{path('app_home')}}#about {% else %} #about {% endif %}" class="btn btn-outline-light px-4 btn-lg btn-about">A propos de moi</a>
                        <button type="button" class="btn-play" data-toggle="modal"
                            data-src="https://www.youtube.com/embed/DWRcNpR6Kdc" data-target="#videoModal">
                            <span></span>
                        </button>
                        <h5 class="font-weight-normal text-white m-0 ml-4 d-none d-sm-block">Lire la vidéo</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="about" id="about">
    <div class="container-fluid py-5">
        <div class="container">
            <div class="position-relative d-flex align-items-center justify-content-center mb-4">
                <h1 class="display-1 text-uppercase text-white text-stroke-about">A propos</h1>
                <h1 class="position-absolute text-uppercase text-primary title">A propos de nous</h1>
            </div>
            <div class="row align-items-center">
                <div class="col-lg-5 pb-4 pb-lg-0">
                    <div class="about-img">
                        <img class="img-fluid rounded w-100" src="{{ asset('assets/images/about.jpg') }}" alt="">
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="about-content mt-3">
                        <h3 class="mb-4"> {{about.title}} </h3>
                        <div class="short-description">
                            {{about.description|slice(0,1000)|raw}} ...
                        </div>
                        <div class="long-description">
                            {{about.description|raw}} 
                        </div>
    
                        <a class="btn btn-outline-primary btn-read-less btn-md px-4 mt-4">Moins de détails</a>
                        <a class="btn btn-outline-primary btn-read-more btn-md px-4 mt-4">Lire plus de détails</a>
                    
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr style="margin-top: 70px;">
</section>

<section class="quality" id="quality">
    <div class="container-fluid">
        <div class="container">
            <div class="position-relative d-flex align-items-center justify-content-center mb-5">
                <h1 class="display-1 text-uppercase text-white quality-text-strok">Qualités</h1>
                <h1 class="position-absolute text-uppercase text-primary title">Nos qualités</h1>
            </div>
            <div class="row align-items-center">
                {% for quality in qualites %}
                <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 text-center mb-5">
                    <div class="d-flex align-items-center justify-content-center mb-4">
                        <div class="quality-icon">
                            <i class=" {{quality.icon}} text-white mr-3"></i>
                        </div>
                        <h4 class="font-weight-bold m-0"> {{quality.title}} </h4>
                    </div>
                    <div class="short-description">
                        {{quality.description|raw}}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

<section class="skills" id="skills">
    <div class="container-fluid py-5" id="skill">
        <div class="container">
            <div class="position-relative d-flex align-items-center justify-content-center mb-5">
                <h1 class="display-1 text-uppercase text-white skill-text-strok">Compétences</h1>
                <h1 class="position-absolute text-uppercase text-primary title">Nos compétences</h1>
            </div>
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="skill mb-4">
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-bold">Conception et modélisation métallique</h6>
                            <h6 class="font-weight-bold">95%</h6>
                        </div>
                        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-primary" style="width: 95%"></div>
                          </div>
                          
                    </div>
                    <div class="skill mb-4">
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-bold">Soudure et assemblage</h6>
                            <h6 class="font-weight-bold">85%</h6>
                        </div>
                        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-warning" style="width: 85%"></div>
                          </div>
                          
                    </div>
                    <div class="skill mb-4">
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-bold">Lecture de plans et dessins techniques </h6>
                            <h6 class="font-weight-bold">90%</h6>
                        </div>
                        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-danger" style="width: 90%"></div>
                          </div>
                          
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="skill mb-4">
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-bold">Utilisation d'équipements de fabrication métallique </h6>
                            <h6 class="font-weight-bold">90%</h6>
                        </div>
                        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-success" style="width: 90%"></div>
                          </div>
                          
                    </div>
                    <div class="skill mb-4">
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-bold">Techniques de découpe, pliage et formage</h6>
                            <h6 class="font-weight-bold">95%</h6>
                        </div>
                        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-dark" style="width: 95%"></div>
                          </div>
                          
                    </div>
                    <div class="skill mb-4">
                        <div class="d-flex justify-content-between">
                            <h6 class="font-weight-bold">Contrôle qualité des matériaux et des produits finis </h6>
                            <h6 class="font-weight-bold">85%</h6>
                        </div>
                        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                            <div class="progress-bar bg-info" style="width: 85%"></div>
                        </div>
                          
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="product" id="product">
    <div class="container-fluid pt-5 pb-3" id="gallery">
        <div class="container">
            <div class="position-relative d-flex align-items-center justify-content-center mb-5">
                <h1 class="display-1 text-uppercase text-white product-text-strok">Produits</h1>
                <h1 class="position-absolute text-uppercase text-primary title">Nos produits</h1>
            </div>
            <div class="row product-container">
                {% for produit in produits %}
                <div class="col-lg-4 col-md-6 mb-4 product-item first">
                    <div class="position-relative overflow-hidden mb-2">
                        <img class="img-fluid rounded w-100" src="{{ asset('uploads/products/' ~ produit.image) }}" alt="">
                        <div class="product-btn bg-primary d-flex align-items-center justify-content-center">
                            <a href="{{path('app_front_produit', {'id' : produit.id})}}" data-lightbox="gallery">
                                <i class="fa fa-plus text-white" style="font-size: 60px;"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
            </div>
        </div>
    </div>
</section>

<section class="contact" id="contact">
    <div class="container-fluid py-5">
        <div class="container">
            <div class="position-relative d-flex align-items-center justify-content-center mb-5">
                <h1 class="display-1 text-uppercase text-white contact-text-strok">Contact</h1>
                <h1 class="position-absolute text-uppercase text-primary title">Contactez-nous</h1>
            </div>
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="contact-form text-center">
                        {% set messageNotification = "" %}
                        {% block messageNotificationContainer %}
                                <div class="flash" id="success" style="margin-bottom: 0; display: none;">
                                    <div class="alert alert-success">
                                        {{messageNotification}}
                                    </div>
                                </div>         
                        {% endblock %}
                       
                        {# <form name="sentMessage" id="contactForm" novalidate="novalidate"> #}
                        {{ form_start(formMessage, {'attr': {'id': 'message', 'action': path('send_message') }}) }}
                            <div class="row">
                                <div class="control-group col-sm-6">
                                    {{form_widget(formMessage.nom)}}
                                    <p class="help-block text-danger"></p>
                                </div>
                                <div class="control-group col-sm-6">
                                    {{form_widget(formMessage.prenom)}}
                                  
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <div class="control-group">
                                {{form_widget(formMessage.objet)}}
                             
                                <p class="help-block text-danger"></p>
                            </div>
                            <div class="control-group">
                                {{form_widget(formMessage.message)}}
                                 {# <textarea class="form-control py-3 px-4" name = "message[message]" rows="5" id="message_message" placeholder="Message"
                                    required="required"
                                    data-validation-required-message="Please enter your message"></textarea>  #}
                                <p class="help-block text-danger"></p>
                            </div>
                            <div>
                                <button class="btn btn-outline-primary" type="submit" id="sendMessageButton">Envoyer message</button>
                            </div>
                        {{ form_end(formMessage) }}
                        {# </form> #}
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="location" id="location">
    <div class="container-fluid py-5">
        <div class="container">
            <div class="position-relative d-flex align-items-center justify-content-center mb-5">
                <h1 class="display-1 text-uppercase text-white siege-text-strok">Siège</h1>
                <h1 class="position-absolute text-uppercase text-primary title">Notre siège</h1>
            </div>

            <div class="row">
                <div class="col-xl-4 col-lg-4 col-md-12 col-sm-12">
                    <div class="siege-description">
                        <p style="text-align: justify; line-height: 2;"> {{siege.description|raw}} </p>
                    </div>
                </div>
                <div class="col-xl-8 col-lg-8 col-md-12 col-sm-12">
                    <div class="row">
                        {% for contact in contacts %}
                            <div class="col-xl-6 col-md-12 col-lg-6 col-sm-12">
                                <div style="margin-left: 50px;">
                                    <h3 class="fw-bold"> {{contact.name}} </h3>
                                    <p><strong>Adresse exacte : </strong> {{contact.adresse}} </p>
                                    <p><strong>Numéro téléphone : </strong> {{contact.contact}} </p>
                                    <p><strong>Adresse e-mail : </strong> {{contact.email}} </p>
                                </div>
                                
                            </div>
                        {% endfor %}
                    </div>
                   
                </div>
            </div>
           
        </div>
    </div>
</section>

<script src="{{ asset('assets/vendor/jquery/jquery.min.js')}}"></script>
<script type="text/javascript">

    $(document).ready(function () {
       $('#message').on('submit', function (e) {
            e.preventDefault();
            let form = $(this);
            let formData = new FormData(form[0]);
          
            $.ajax({
                url: form.attr('action'),
                type: form.attr('method'),
                data: formData,
                processData: false,
                contentType: false,
                beforeSend: function () {
                   // blockPage();
                },
                complete: function (result) {
                   //unblockPage();
                },
                success: function (response) {
                    $('#success').replaceWith(response.fullGlobalRecapHtml);
                    $('#success').css('display', 'block');
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    // Gérer l'erreur (par exemple, afficher un message d'erreur)
                    alert('Erreur lors de l\'envoie du message.');
                },
            });
        });
    });
</script>
{% endblock %}
